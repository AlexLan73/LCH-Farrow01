# ============================================================================
# GPU Module CMakeLists (SIMPLIFIED - HEADER ONLY)
# src/GPU/CMakeLists.txt
# ============================================================================
# –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï: GPU –º–æ–¥—É–ª—å (—Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ - header-only)
# ============================================================================

message(STATUS "")
message(STATUS "üîß Processing: src/GPU/")
message(STATUS "")

# ============================================================================
# GPU –ú–û–î–£–õ–¨ - HEADER ONLY (–±–µ–∑ cpp —Ñ–∞–π–ª–æ–≤)
# ============================================================================

# –°–æ–∑–¥–∞–µ–º interface library (—Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏, –Ω–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
add_library(lfm_gpu INTERFACE)

message(STATUS "‚úÖ Created interface library: lfm_gpu (header-only)")

# ============================================================================
# –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï INCLUDE –î–ò–†–ï–ö–¢–û–†–ò–ô
# ============================================================================

target_include_directories(lfm_gpu INTERFACE
    ${CMAKE_SOURCE_DIR}/include
    ${CMAKE_SOURCE_DIR}/include/GPU
    ${CMAKE_SOURCE_DIR}/include/ManagerOpenCL
    ${CMAKE_SOURCE_DIR}/include/interface
)

# ============================================================================
# –õ–ò–ù–ö–û–í–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô
# ============================================================================

target_link_libraries(lfm_gpu INTERFACE
    lfm_opencl_manager
    OpenCL::OpenCL
)

if(CLFFT_FOUND)
    target_link_libraries(lfm_gpu INTERFACE "${CLFFT_LIB}")
    target_include_directories(lfm_gpu INTERFACE "${CLFFT_INCLUDE_DIR}")
endif()

# ============================================================================
# COMPILE DEFINITIONS
# ============================================================================

target_compile_definitions(lfm_gpu INTERFACE
    GPU_MODULE_ENABLED=1
    OPENCL_ENABLED=1
    CL_TARGET_OPENCL_VERSION=300
)

message(STATUS "‚úÖ GPU module configured (header-only)")
message(STATUS "")