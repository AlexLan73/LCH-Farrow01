# ============================================================================
# Test Module CMakeLists (SIMPLIFIED - HEADER ONLY)
# src/Test/CMakeLists.txt
# ============================================================================
# –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï: Test –º–æ–¥—É–ª—å (—Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ - header-only)
# ============================================================================

message(STATUS "")
message(STATUS "üîß Processing: src/Test/")
message(STATUS "")

# ============================================================================
# TEST –ú–û–î–£–õ–¨ - HEADER ONLY (–±–µ–∑ cpp —Ñ–∞–π–ª–æ–≤)
# ============================================================================

# –°–æ–∑–¥–∞–µ–º interface library (—Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏, –Ω–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
add_library(lfm_tests INTERFACE)

message(STATUS "‚úÖ Created interface library: lfm_tests (header-only)")

# ============================================================================
# –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï INCLUDE –î–ò–†–ï–ö–¢–û–†–ò–ô
# ============================================================================

target_include_directories(lfm_tests INTERFACE
    ${CMAKE_SOURCE_DIR}/include
    ${CMAKE_SOURCE_DIR}/include/Test
    ${CMAKE_SOURCE_DIR}/include/GPU
    ${CMAKE_SOURCE_DIR}/include/ManagerOpenCL
    ${CMAKE_SOURCE_DIR}/include/interface
    ${CMAKE_SOURCE_DIR}/include/radar
    ${CMAKE_SOURCE_DIR}/src
)

# ============================================================================
# –õ–ò–ù–ö–û–í–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô
# ============================================================================

target_link_libraries(lfm_tests INTERFACE
    lfm_gpu
    lfm_opencl_manager
    OpenCL::OpenCL
)

if(CLFFT_FOUND)
    target_link_libraries(lfm_tests INTERFACE "${CLFFT_LIB}")
    target_include_directories(lfm_tests INTERFACE "${CLFFT_INCLUDE_DIR}")
endif()

if(NLOHMANN_JSON_FOUND)
    target_link_libraries(lfm_tests INTERFACE nlohmann_json::nlohmann_json)
endif()

# ============================================================================
# COMPILE DEFINITIONS
# ============================================================================

target_compile_definitions(lfm_tests INTERFACE
    TEST_MODULE_ENABLED=1
    OPENCL_ENABLED=1
    GPU_MODULE_ENABLED=1
    CL_TARGET_OPENCL_VERSION=300
)

message(STATUS "‚úÖ Test module configured (header-only)")
message(STATUS "")