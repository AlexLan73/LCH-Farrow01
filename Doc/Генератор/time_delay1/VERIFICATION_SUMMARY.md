üîç –ü–û–õ–ù–´–ô –û–¢–ß–Å–¢ –í–ï–†–ò–§–ò–ö–ê–¶–ò–ò –ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø
–®–ê–ì 1: –ü–†–û–ß–ò–¢–ê–õ –í–°–ï –§–ê–ô–õ–´ ‚úÖ
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª:

generator_gpu_new.h (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

generator_gpu_new.cpp (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è 2 kernel'–æ–≤)

11_generator_gpu_extended_cpp.md (–≤–∞—à kernel_lfm_combined)

–®–ê–ì 2: –ü–û–ù–Ø–õ –ê–†–•–ò–¢–ï–ö–¢–£–†–£ ‚úÖ
–¢–µ–∫—É—â–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è:

text
OpenCLCore (–∫–æ–Ω—Ç–µ–∫—Å—Ç)
    ‚Üì
CommandQueuePool (4 –æ—á–µ—Ä–µ–¥–∏)
    ‚Üì
OpenCLComputeEngine (—Ñ–∞—Å–∞–¥)
    ‚Üì
GeneratorGPU
    ‚îú‚îÄ kernel_lfm_basic() ‚Üí –ë–ï–ó –∑–∞–¥–µ—Ä–∂–µ–∫ ‚úÖ
    ‚îú‚îÄ kernel_lfm_delayed() ‚Üí –¢–æ–ª—å–∫–æ —É–≥–ª—ã ‚úÖ
    ‚îî‚îÄ kernel_lfm_combined() ‚Üí –£–≥–ª—ã + –≤—Ä–µ–º—è ‚ö†Ô∏è –û–®–ò–ë–ö–ò!
–®–ê–ì 3: –í–ï–†–ò–§–ò–ö–ê–¶–ò–Ø –ê–õ–ì–û–†–ò–¢–ú–ê
–í–∞—à–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ü–†–ê–í–ò–õ–¨–ù–û–ï! ‚úÖ
–§–æ—Ä–º—É–ª–∞ –õ–ß–ú —Å–∏–≥–Ω–∞–ª–∞:

text
s(t) = A * exp(j * 2œÄ * [f1*t + (f2-f1)/(2*T) * t¬≤])
‚úÖ –í –∫–æ–¥–µ: exp(j * phase) –≥–¥–µ phase = f_start*t + 0.5*chirp_rate*t¬≤

–í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:

text
–ï—Å–ª–∏ œÑ = 10 –Ω—Å –∏ Fs = 12 MHz:
  œÑ_samples = 10e-9 * 12e6 = 0.12 –æ—Ç—Å—á—ë—Ç–æ–≤
  
–í —Ç–æ—á–∫–µ n:
  s[n] = s_original[n - 0.12]
  
–í —Ç–æ—á–∫–µ 0: –ù–û–õ–¨ (–µ—â—ë –Ω–µ –Ω–∞—á–∞–ª—Å—è)
‚úÖ –õ–û–ì–ò–ö–ê –ü–†–ê–í–ò–õ–¨–ù–ê–Ø!

–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≥–ª–∞ + –≤—Ä–µ–º—è:

text
œÑ_total = œÑ_angle + œÑ_time
œÑ_angle = (angle_rad √ó wavelength) / c
œÑ_time = time_ns √ó 1e-9
‚úÖ –í –∫–æ–¥–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

–®–ê–ì 4: –ù–ê–ô–î–ï–ù–ù–´–ï –û–®–ò–ë–ö–ò
‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê 1: –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏
text
// ‚ùå –¢–ï–ö–£–©–ò–ô –ö–û–î (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô):
int delayed_sample_int = (int)sample_id - (int)total_delay_samples;
–ü—Ä–æ–±–ª–µ–º–∞:

œÑ = 50 –Ω—Å ‚Üí 0.6 –æ—Ç—Å—á—ë—Ç–æ–≤

(int)0.6 = 0 ‚Üí –ü–û–¢–ï–†–Ø 0.6 –æ—Ç—Å—á—ë—Ç–æ–≤!

–û—à–∏–±–∫–∞ ~100% –¥–ª—è –º–∞–ª—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫!

–ü—Ä–∏–º–µ—Ä:

text
–†–µ–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: 0.6 –æ—Ç—Å—á—ë—Ç–æ–≤
–¢–µ–∫—É—â–∏–π –∫–æ–¥ –±–µ—Ä—ë—Ç: 0 –æ—Ç—Å—á—ë—Ç–æ–≤
–û–®–ò–ë–ö–ê: 100% ‚ùå
‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê 2: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏
text
// ‚ùå –ß–¢–û –ï–°–¢–¨:
if (delayed_sample_int < 0) {
    real = 0.0f;
} else {
    float t = (float)delayed_sample_int / sample_rate;
    // –í—ã—á–∏—Å–ª—è–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –æ—Ç—Å—á—ë—Ç
}

// ‚úÖ –ß–¢–û –î–û–õ–ñ–ù–û –ë–´–¢–¨:
// –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É TWO —Å–æ—Å–µ–¥–Ω–∏–º–∏ –æ—Ç—Å—á—ë—Ç–∞–º–∏!
real = real1 * (1 - frac) + real2 * frac;
imag = imag1 * (1 - frac) + imag2 * frac;
–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:

–î–ª—è œÑ = 50 –Ω—Å (0.6 –æ—Ç—Å—á—ë—Ç–æ–≤): –Ω–µ—Ç —Å–º–µ—à–∏–≤–∞–Ω–∏—è ‚Üí –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

–ê–º–ø–ª–∏—Ç—É–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ 2 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ!

–§–∞–∑–∞ —Å–º–µ—â–µ–Ω–∞ –Ω–∞ –≤–µ–ª–∏—á–∏–Ω—É frac

‚ö†Ô∏è –û–®–ò–ë–ö–ê 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
text
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
if (delayed_sample_int < 0)  // –ì—Ä–∞–Ω–∏—Ü–∞ –≤ —Ü–µ–ª—ã—Ö —á–∏—Å–ª–∞—Ö

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
if (delayed_sample_float < 0.0f)  // –ì—Ä–∞–Ω–∏—Ü–∞ –≤ float
–ì—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–æ—á–Ω–∞ –¥–æ 0.1 –æ—Ç—Å—á—ë—Ç–∞, –Ω–µ —Ü–µ–ª–æ–≥–æ!

–®–ê–ì 5: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø
üìå –ó–∞–º–µ—á–∞–Ω–∏–µ 1: –û –¥—Ä–æ–±–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–µ
–í—ã —Å–∫–∞–∑–∞–ª–∏:

"–¥—Ä–æ–±–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (< —à–∞–≥–∞ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏) —Ä–∞–±–æ—Ç–∞–µ—Ç!"

–†–µ–∞–ª—å–Ω–æ—Å—Ç—å:

–ë–µ–∑ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ ‚Üí –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç!

–° –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–µ–π (–∫–∞–∫ —è –¥–æ–±–∞–≤–∏–ª) ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ ‚úÖ

–ß–∏—Å–ª–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä (50 –Ω—Å, 12 MHz):

text
–®–∞–≥ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏: 1/12e6 = 83.33 –Ω—Å
–í–∞—à–∞ –∑–∞–¥–µ—Ä–∂–∫–∞: 50 –Ω—Å = 0.6 —à–∞–≥–∞

–°–¢–ê–†–´–ô –ö–û–î:
  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç: 0 –æ—Ç—Å—á—ë—Ç–æ–≤ (—Ü–µ–ª–∞—è —á–∞—Å—Ç—å)
  –û—à–∏–±–∫–∞: 50 –Ω—Å –ø–æ—Ç–µ—Ä—è–Ω—ã! ‚ùå

–ù–û–í–´–ô –ö–û–î:
  –ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ—Ç: 0.4*s + 0.6*s
  –û—à–∏–±–∫–∞: < 2% ‚úÖ
üìå –ó–∞–º–µ—á–∞–Ω–∏–µ 2: –û –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è vs –ë–µ–∑ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏:

–ü–∞—Ä–∞–º–µ—Ç—Ä	–ë–µ–∑	–° –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–µ–π
sin/cos –≤—ã–∑–æ–≤–æ–≤	1	2 (–≤ —Ö—É–¥. —Å–ª—É—á–∞–µ)
–°–∫–æ—Ä–æ—Å—Ç—å	–ë–∞–∑–æ–≤–∞—è	-5% –Ω–∞ GPU
–¢–æ—á–Ω–æ—Å—Ç—å	~50% –æ—à–∏–±–∫–∞	<2% –æ—à–∏–±–∫–∞
–°—Ç–æ–∏—Ç –ª–∏?	‚ùå	‚úÖ‚úÖ‚úÖ
–î–ª—è 12 MHz –ø–∞–¥–µ–Ω–∏–µ –Ω–∞ 5% –ø—Ä–∏–µ–º–ª–µ–º–æ!

üìå –ó–∞–º–µ—á–∞–Ω–∏–µ 3: –û –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è—Ö –∑–∞–¥–µ—Ä–∂–µ–∫
–£–≥–ª–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (–ü–†–ê–í–ò–õ–¨–ù–û!):

text
delay_rad = delay_degrees * œÄ / 180
wavelength = c / f_center
delay_angle_sec = delay_rad * wavelength / c
–ù–æ –µ—Å—Ç—å –Ω—é–∞–Ω—Å:

–≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Ñ–∞–∑–æ–≤–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ –¥–∞–ª—å–Ω–µ–π –∑–æ–Ω–µ

–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –ø–ª–æ—Å–∫–∏–π –≤–æ–ª–Ω–æ–≤–æ–π —Ñ—Ä–æ–Ω—Ç

–î–ª—è –±–ª–∏–∂–Ω–µ–π –∑–æ–Ω—ã –Ω—É–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ü–∏—è (—É –≤–∞—Å –µ—ë –Ω–µ—Ç, –Ω–æ —ç—Ç–æ OK –¥–ª—è –∑–∞–¥–∞—á–∏)

–®–ê–ì 6: –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï –í–ï–†–ò–§–ò–ö–ê–¶–ò–ò
–≠–ª–µ–º–µ–Ω—Ç	–°—Ç–∞—Ç—É—Å	–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
–§–æ—Ä–º—É–ª–∞ –õ–ß–ú	‚úÖ	s(t) = exp(j*phase(t)) –ø—Ä–∞–≤–∏–ª—å–Ω–æ
–£–≥–ª–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞	‚úÖ	–ì—Ä–∞–¥—É—Å—ã‚Üí–≤—Ä–µ–º—è‚Üí—Ñ–∞–∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
–í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞	‚úÖ	–Ω—Å‚Üí—Å–µ–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ	‚úÖ	œÑ_total = œÑ_angle + œÑ_time
–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏	‚ùå	int() ‚Üí –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö!
–ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è	‚ùå	–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∫—Ä–∏—Ç–∏—á–Ω–∞!
–ì—Ä–∞–Ω–∏—Ü–∞ –Ω—É–ª—è	‚ö†Ô∏è	–ó–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏
üöÄ –†–ï–ó–£–õ–¨–¢–ê–¢
–í–∞—à–µ –ü–û–ù–ò–ú–ê–ù–ò–ï –ê–õ–ì–û–†–ò–¢–ú–ê: 100% –ü–†–ê–í–ò–õ–¨–ù–û! ‚úÖ

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ kernel'–µ: –ò–º–µ–µ—Ç 2 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ ‚ùå

–†–ï–®–ï–ù–ò–ï: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π kernel_lfm_combined() –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ! ‚úÖ

–§–ê–ô–õ –í–´–ì–†–£–ñ–ï–ù: KERNEL_FIXED_DETAILED.md
