üîç –û–¢–ß–Å–¢ –û –ù–ê–ô–î–ï–ù–ù–´–• –û–®–ò–ë–ö–ê–•
–û–®–ò–ë–ö–ê #1: int –≤–º–µ—Å—Ç–æ float –¥–ª—è –∑–∞–¥–µ—Ä–∂–∫–∏
–ß–¢–û –ë–´–õ–û:

cpp
int delayed_sample_int = (int)sample_id - (int)total_delay_samples;
–ü–†–û–ë–õ–ï–ú–ê:

–¢–µ—Ä—è–µ—Ç—Å—è –¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏!

50 –Ω—Å = 0.6 –æ—Ç—Å—á—ë—Ç–æ–≤ ‚Üí —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 0 –æ—Ç—Å—á—ë—Ç–æ–≤

10 –Ω—Å = 0.12 –æ—Ç—Å—á—ë—Ç–æ–≤ ‚Üí —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 0 –æ—Ç—Å—á—ë—Ç–æ–≤

–û–®–ò–ë–ö–ê: 100% –¥–ª—è –¥—Ä–æ–±–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫!

–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:

cpp
float delayed_sample_float = (float)sample_id - total_delay_samples;
–û–®–ò–ë–ö–ê #2: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏
–ß–¢–û –ë–´–õ–û:

cpp
if (delayed_sample_int < 0 || delayed_sample_int >= num_samples)
    return ZERO;
s_out = s_in[delayed_sample_int];  // –ü—Ä–æ—Å—Ç–æ –±–µ—Ä—ë–º –±–ª–∏–∂–∞–π—à–∏–π –æ—Ç—Å—á—ë—Ç!
–ü–†–û–ë–õ–ï–ú–ê:

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ü–µ–ª–∞—è —á–∞—Å—Ç—å –æ—Ç—Å—á—ë—Ç–∞

–î—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

–§–∞–∑–∞ "–ø—Ä—ã–≥–∞–µ—Ç" –Ω–∞ —Ü–µ–ª—ã–µ –æ—Ç—Å—á—ë—Ç—ã

–û—à–∏–±–∫–∞ –≤ –∞–º–ø–ª–∏—Ç—É–¥–µ –∏ —Ñ–∞–∑–µ!

–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:

cpp
float frac = delayed_sample_float - (float)sample_int;
if (frac < 1e-6) {
    // –¶–µ–ª—ã–π –æ—Ç—Å—á—ë—Ç
    s_out = s_in[sample_int];
} else {
    // –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É sample_int –∏ sample_int+1
    s_out = s_in[sample_int] * (1-frac) + s_in[sample_int+1] * frac;
}
–û–®–ò–ë–ö–ê #3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –Ω—É–ª–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
–ß–¢–û –ë–´–õ–û:

cpp
if ((int)total_delay_samples >= (int)num_samples)
    return ZERO;
–ü–†–û–ë–õ–ï–ú–ê:

–ì—Ä–∞–Ω–∏—Ü–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –¥–ª—è —Ü–µ–ª–æ–π —á–∞—Å—Ç–∏

–ú–æ–∂–µ—Ç –±—ã—Ç—å –≥—Ä–∞–Ω–∏—á–Ω—ã–π —Å–ª—É—á–∞–π —Å –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç—å—é

–ù–µ—Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ

–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:

cpp
if (delayed_sample_float < 0.0f)
    return ZERO;  // –î—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è!
–†–ï–ó–£–õ–¨–¢–ê–¢ –û–®–ò–ë–û–ö
–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è	–¢–æ—á–Ω–æ—Å—Ç—å
50 –Ω—Å (0.6 –æ—Ç—Å—á—ë—Ç–∞)	100% –æ—à–∏–±–∫–∞ ‚Üí –±–µ—Ä—ë–º 0-–π –æ—Ç—Å—á—ë—Ç –≤–º–µ—Å—Ç–æ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏
10 –Ω—Å (0.12 –æ—Ç—Å—á—ë—Ç–∞)	100% –æ—à–∏–±–∫–∞ ‚Üí –±–µ—Ä—ë–º 0-–π –æ—Ç—Å—á—ë—Ç –≤–º–µ—Å—Ç–æ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏
–ê–º–ø–ª–∏—Ç—É–¥–∞	–ú–æ–∂–µ—Ç –±—ã—Ç—å –≤ 2x –Ω–∏–∂–µ
–§–∞–∑–∞	–°–∫–∞—á–∫–∏ –Ω–∞ —Ü–µ–ª—ã–µ –æ—Ç—Å—á—ë—Ç—ã
–¢–ï–ü–ï–†–¨ –ò–°–ü–†–ê–í–õ–ï–ù–û! ‚úÖ